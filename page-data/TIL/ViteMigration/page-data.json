{"componentChunkName":"component---src-templates-post-template-tsx","path":"/TIL/ViteMigration/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3 id=\"CRA와-Vite\" style=\"position:relative;\">CRA와 Vite<a href=\"#CRA%EC%99%80-Vite\" aria-label=\"CRA와 Vite permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><span class='highlight'><b>CRA(create react app)</b>은 리액트 프로젝트르르 시작할 때 필요한 개발 환경을 세팅해주는 도구다.</span> CRA의 장점을 쉽다. 명령어 하나로 모든 설치가 완료된다. 모듈 번들러로 Webpack을 사용하고, Webpack은 자바스크립트 코드로 구성된 툴이다. 자바스크립트는 interpreted 언어라 느리다. <br/>그래서 이 단점을 보완해서 나온게 Esbuild인데, Esbuild 기반으로 만들어진 프론트엔드 빌드툴이 바로 <b>Vite</b>다. <span class='highlight'> Vite의 핵심은 ES 모듈을 사용하여 브라우저가 필요로 하는 어플리케이션 코드의 일부분만 변환하고 제공하는 것이다.</span></p>\n<blockquote>\n<p>Vite는 번들링을 생략하여 개발 서버를 빠르게 구동시킨다. (이건 작동시키면 조금이라도 느껴진다. 바로 실행되는 것이.)</p>\n</blockquote>\n<h3 id=\"1-vite-설치\" style=\"position:relative;\">1. vite 설치<a href=\"#1-vite-%EC%84%A4%EC%B9%98\" aria-label=\"1 vite 설치 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-D</span> vite @vitejs/plugin-react vite-plugin-svgr</code></pre></div>\n<ul>\n<li>svg를 사용하고 있는 프로젝트라면, <code class=\"language-text\">vite-plugin-svgr</code> 설치 필요 <br/>\n<ul>\n<li><span class='highlight'>svgr이란 svg를 리액트의 컴포넌트로 변환시켜주는 라이브러리</span></li>\n<li>CRA로 리액트 앱을 초기화 하면 자동으로 설정이 되어있지만, vite로 리액트 앱 초기화시 직접 설정해줘야 한다. <br/>\n(현재 기준, <code class=\"language-text\">vite-plugin-svgr</code> 버전이 4인데 3에서 업그레이드되면서 import error 발생한다. 그래서 바로 <code class=\"language-text\">@svgr/rollup</code> 설치하면 편하다. 관련한 파일 등은 <a href=\"https://wjdgml3092.github.io/TIL/ViteMigration/#%ED%8A%B8%EB%9F%AC%EB%B8%94-%EC%8A%88%ED%8C%85-2---svg-import-error\">트러블 슈팅 2번</a> 확인하기)</li>\n</ul>\n</li>\n</ul>\n<p>&#x3C;의존성 에러가 난다면 아래 <a href=\"https://wjdgml3092.github.io/TIL/ViteMigration/#%ED%8A%B8%EB%9F%AC%EB%B8%94-%EC%8A%88%ED%8C%85-1---%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-dependency-%EC%B6%A9%EB%8F%8C\">트러블 슈팅 1번</a> 확인하기></p>\n<h3 id=\"2-viteconfigts-파일-작성\" style=\"position:relative;\">2. vite.config.ts 파일 작성<a href=\"#2-viteconfigts-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1\" aria-label=\"2 viteconfigts 파일 작성 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> defineConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vite'</span>\n<span class=\"token keyword\">import</span> react <span class=\"token keyword\">from</span> <span class=\"token string\">'@vitejs/plugin-react'</span>\n<span class=\"token keyword\">import</span> svgrPlugin <span class=\"token keyword\">from</span> <span class=\"token string\">'vite-plugin-svgr'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">react</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">svgrPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"3-indexhtml-파일-위치-변경-및-수정\" style=\"position:relative;\">3. index.html 파일 위치 변경 및 수정<a href=\"#3-indexhtml-%ED%8C%8C%EC%9D%BC-%EC%9C%84%EC%B9%98-%EB%B3%80%EA%B2%BD-%EB%B0%8F-%EC%88%98%EC%A0%95\" aria-label=\"3 indexhtml 파일 위치 변경 및 수정 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<ul>\n<li>\n<p>index.html 파일 위치 변경</p>\n<ul>\n<li><code class=\"language-text\">/public</code> 경로에 있는 index.html 파일을 프로젝트 루트 경로로 옮긴다.<br/>\n이유는 <a href=\"https://vitejs.dev/guide/#index-html-and-project-root\">여기서</a> 확인하기</li>\n</ul>\n</li>\n<li>\n<p>index.html 수정</p>\n<ul>\n<li>\n<p>URL은 Vite에서 약간 다르게 취급되므로 <code class=\"language-text\">%PUBLIC_URL%</code>의 모든 참조를 제거해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">//example</span>\n<span class=\"token comment\">//before</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%PUBLIC_URL%/favicon.ico<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token comment\">//after</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/favicon.ico<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n</li>\n<li>\n<p>body 요소 진입점 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>noscript</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You need to enable JavaScript to run this app.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>noscript</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 아래 스크립트 태그 추가 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/src/index.tsx<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"4-tsconfingjson-수정\" style=\"position:relative;\">4. tsconfing.json 수정<a href=\"#4-tsconfingjson-%EC%88%98%EC%A0%95\" aria-label=\"4 tsconfingjson 수정 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<ul>\n<li>target, lib, types 수정해줬다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ESNext\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"DOM\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"DOM.Iterable\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"types\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"vite/client\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"vite-plugin-svgr/client\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h3 id=\"5-env파일이-정의되어있다면\" style=\"position:relative;\">5. env파일이 정의되어있다면,<a href=\"#5-env%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A0%95%EC%9D%98%EB%90%98%EC%96%B4%EC%9E%88%EB%8B%A4%EB%A9%B4\" aria-label=\"5 env파일이 정의되어있다면 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>파이어베이스 관련 값들을 env로 관리했다. <br/>CRA였다면, 다들 <code class=\"language-text\">REACT_</code>로 시작했을 것이다.\nVite로 갈아타니깐 <code class=\"language-text\">VITE_</code>로 변경해준다.\n<br/>\n<b>만약 배포서버에서 env를 관리하고 있다면 같이 변경해주기!</b><br/>(나는 vercel로 배포해서 vercel에서 변경해줬다.)</p>\n<h3 id=\"6-CRA-제거-및-pacakagejson-수정\" style=\"position:relative;\">6. CRA 제거 및 pacakage.json 수정<a href=\"#6-CRA-%EC%A0%9C%EA%B1%B0-%EB%B0%8F-pacakagejson-%EC%88%98%EC%A0%95\" aria-label=\"6 CRA 제거 및 pacakagejson 수정 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<ul>\n<li>\n<p>CRA 제거 <br/>\n<code class=\"language-text\">npm uninstall react-scripts</code></p>\n</li>\n<li>\n<p>package.json 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc &amp;&amp; vite build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"serve\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite preview\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"7-실행\" style=\"position:relative;\">7. 실행<a href=\"#7-%EC%8B%A4%ED%96%89\" aria-label=\"7 실행 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>나는 dev가 실행이니깐 <code class=\"language-text\">npm run dev</code>로 잘되는지 확인했다.</p>\n<h3 id=\"트러블-슈팅-1---라이브러리-dependency-충돌\" style=\"position:relative;\">트러블 슈팅 (1) - 라이브러리 dependency 충돌<a href=\"#%ED%8A%B8%EB%9F%AC%EB%B8%94-%EC%8A%88%ED%8C%85-1---%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-dependency-%EC%B6%A9%EB%8F%8C\" aria-label=\"트러블 슈팅 1   라이브러리 dependency 충돌 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>vite 설치 시작부터 dependency 에러 발견.</p>\n<div style=\"width: 50%;\">\n        <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b9ee029d50ce53d7458e8e2365e16be7/ca756/ViteError_1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 91.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAADAElEQVR42l1U2W7bQAzUBxQ9gxixEh2WdV+rW44s+agTFwjah7z0rf//F1MM202BPhDc1ZLD4ZC2EYQhqqJA/eEDrC9fkMcRLvMeu6ZG7G3QlQXaIodKYrR5hiqJMVQlelUicCy46zu45lq883APIy8KLNOE5uYGj5aJl1bha5HiUqR4UhmudYFTFuGlr/HSN+J5/7Hr8fO84PvYiv/17SsuaQAjDEMclgWzqpDaFpo4RBn4qONQrE1iFL6HKgzQxBGKrYfEscWr0EfubSReBT4S24IRxTG6ukbHlm9vkdc1xt0jxscJbd+LzYej2G7aY5oXVE2Dsqqg6gZxmsLzfdRtiyCK/gB+u17RBIFouSwLXl9fcb1escwzVFkiTRI0dY04jqFUiSgM4fs+0jQFOwx8H2VZYut5MOIkwdC2aD9/hrNawfU87HY7HA4HdF0ngXVdI8syAQmCQIzg9JZl4f7+HqZp4uHh4V/L48ePcFcr2K6LPMswjqOAkEFRFHImozzPxbMQv282GwG1bVu8kTK575F8+oTQtlGUpSSTQVVVaKhXWWIYBvTUtG3f3giui7LIdruFkfzVJ7y9hWfb4BpFUSRASilJIBMGa3YE4J2gfNMdkKVRKoXT8Yjg5gaOaYISMIHBmimNADqRBaknY2gszDfHcWDwclwWNK6LTins51n2cpom0VEPiIMhOybyTAk0IIsQh0WMLM+xGwaM2y3aogAZ67aYzDZpFJxT1OL/b29DSdIUY9dheP8em9UKluPIGnB69K7rSrD2d3d3WK/XYlwVer02Aqj3sH73Donj4Hg+YxwGWXC2+/T0JOf9fo/j8SgtsmXdLndVD45FRcPL5YIuywSYGmpA6kitGMwlphQ0boYeFt94J6gAep4nwaFpYuu6bz8pBnCy1JKBjKPnJGm80ygN4yiHrA0BDmTFVclzLIeDMD6fz8Lu+flZWj2dTmLzPMs3dsDp86xjyNQgbQZO84yu74Uti3DXWJle/gD+ficjvdj6t01PHL79BuPOIrHdbvH1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/b9ee029d50ce53d7458e8e2365e16be7/a59e9/ViteError_1.webp 192w,\n/static/b9ee029d50ce53d7458e8e2365e16be7/0ca9f/ViteError_1.webp 384w,\n/static/b9ee029d50ce53d7458e8e2365e16be7/dc9b9/ViteError_1.webp 768w,\n/static/b9ee029d50ce53d7458e8e2365e16be7/e2c2f/ViteError_1.webp 1152w,\n/static/b9ee029d50ce53d7458e8e2365e16be7/a9a75/ViteError_1.webp 1296w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/webp\">\n          <source srcset=\"/static/b9ee029d50ce53d7458e8e2365e16be7/3b721/ViteError_1.png 192w,\n/static/b9ee029d50ce53d7458e8e2365e16be7/66595/ViteError_1.png 384w,\n/static/b9ee029d50ce53d7458e8e2365e16be7/fe486/ViteError_1.png 768w,\n/static/b9ee029d50ce53d7458e8e2365e16be7/d2d74/ViteError_1.png 1152w,\n/static/b9ee029d50ce53d7458e8e2365e16be7/ca756/ViteError_1.png 1296w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/b9ee029d50ce53d7458e8e2365e16be7/fe486/ViteError_1.png\" alt=\"ViteError 1\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n</div>\n<p><code class=\"language-text\">npm install —save-dev @types/node@latest</code>\n→ 최신버전 설치 먼저 진행 <br/>\n<code class=\"language-text\">npm i vite @vitejs/plugin-react vite-plugin-svgr</code>\n→ 다시 설치해보니 됐다.</p>\n<h3 id=\"트러블-슈팅-2---svg-import-error\" style=\"position:relative;\">트러블 슈팅 (2) - svg import error<a href=\"#%ED%8A%B8%EB%9F%AC%EB%B8%94-%EC%8A%88%ED%8C%85-2---svg-import-error\" aria-label=\"트러블 슈팅 2   svg import error permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>세팅 완료 후 실행을 해보니, 흰화면에 아래 에러를 만났다.</p>\n<div style=\"width: 100%;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/91ee6ef5b05f6ce83021cd022b2d7bfd/37cfc/ViteError_2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 8.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjElEQVR42h3F3QqCMACAUd//hfqDDEmclubcVKalmDZUMrqMbr6gc3OcRgTMRU6fJPRJzKgVk9ZYKZm1wp4F/UlgLzFDHPLMM76j5WMfvLuBwG+Q5xaj7hjZ4tT+kWy7oXD3/+V6hfE8ukhQhRfcnSI8ZERuTJXeyERB4qW8KsNiKkadM5UlS31lkIofPsiLejFqLh4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/91ee6ef5b05f6ce83021cd022b2d7bfd/a59e9/ViteError_2.webp 192w,\n/static/91ee6ef5b05f6ce83021cd022b2d7bfd/0ca9f/ViteError_2.webp 384w,\n/static/91ee6ef5b05f6ce83021cd022b2d7bfd/dc9b9/ViteError_2.webp 768w,\n/static/91ee6ef5b05f6ce83021cd022b2d7bfd/e2c2f/ViteError_2.webp 1152w,\n/static/91ee6ef5b05f6ce83021cd022b2d7bfd/6b378/ViteError_2.webp 1492w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/webp\">\n          <source srcset=\"/static/91ee6ef5b05f6ce83021cd022b2d7bfd/3b721/ViteError_2.png 192w,\n/static/91ee6ef5b05f6ce83021cd022b2d7bfd/66595/ViteError_2.png 384w,\n/static/91ee6ef5b05f6ce83021cd022b2d7bfd/fe486/ViteError_2.png 768w,\n/static/91ee6ef5b05f6ce83021cd022b2d7bfd/d2d74/ViteError_2.png 1152w,\n/static/91ee6ef5b05f6ce83021cd022b2d7bfd/37cfc/ViteError_2.png 1492w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/91ee6ef5b05f6ce83021cd022b2d7bfd/fe486/ViteError_2.png\" alt=\"ViteError 2\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n</div>\n<br/>\n<ul>\n<li>\n<p>루트에 svg.d.ts 파일 생성 <br/></p>\n<ul>\n<li><b>.d.ts 파일</b>은 기존 js 모듈을 ts에서 사용할 수 있도록 타입을 정의할 수 있는 파일이다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">'*.svg'</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">import</span> React <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> ReactComponent<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent<span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>SVGProps<span class=\"token operator\">&lt;</span>SVGSVGElement\n\n    <span class=\"token keyword\">const</span> src<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> src\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>tsconfing.json에 생성한 .d.ts 파일 추가 <br/></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"svg.d.ts\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>\n<p>라이브러리 변경</p>\n<ul>\n<li>\n<p>4.x.x 버전에서 <code class=\"language-text\">ReactComponent</code>로 svg를 import하는데 에러가 해결되지 않는 이슈가 발행되어있었고, 나 역시 svg에 스타일링을 주기위해 <code class=\"language-text\">ReactComponent</code> import하는데 에러가 해결되지 않아 라이브러리를 변경해줬다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">vite-plugin-svgr</code> → <code class=\"language-text\">@svgr/rollup</code> <br/></p>\n<ul>\n<li>vite-plugin-svgr은 삭제해주고, 해당 라이브러리 import하는부분은 삭제해주기</li>\n<li>vite.config.ts 수정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> defineConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vite'</span>\n<span class=\"token keyword\">import</span> react <span class=\"token keyword\">from</span> <span class=\"token string\">'@vitejs/plugin-react'</span>\n<span class=\"token keyword\">import</span> svgr <span class=\"token keyword\">from</span> <span class=\"token string\">'@svgr/rollup'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">react</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">svgr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<p><a href=\"https://stackoverflow.com/questions/54121536/typescript-module-svg-has-no-exported-member-reactcomponent\">참고링크 1</a> <br/>\n<a href=\"https://github.com/pd4d10/vite-plugin-svgr/issues/109\">참고링크 2</a></p>\n<h3 id=\"트러블-슈팅-3---env-접근\" style=\"position:relative;\">트러블 슈팅 (3) - env 접근<a href=\"#%ED%8A%B8%EB%9F%AC%EB%B8%94-%EC%8A%88%ED%8C%85-3---env-%EC%A0%91%EA%B7%BC\" aria-label=\"트러블 슈팅 3   env 접근 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div style=\"width: 80%;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a0577e0bb9986f8ddb19af6df816cada/93a6a/ViteError_3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 15.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwUlEQVR42h3D206DMACAYd7/aUx8gEVgChtQVsJpsix2YsupXuiFbiW/cV/yed+PDxgh6OKIcxxRbza0/hNXo7kNBjeNXAdz/6MNr5VGZD3hs0KKd4pMkaeKdK/46kc81/eoJOEYBHRhQBuENL7PJZdcDpKpaXlLUk5RjMoEQ31Ely3dLkXlBe32hdMuofa3/BqD5z4tq7U4axnKgr77oKlG9qm+byuDPGik1Ihc05SG2zyzLjNumVjtjPs/Tzi78AckotciCj6XiQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/a0577e0bb9986f8ddb19af6df816cada/a59e9/ViteError_3.webp 192w,\n/static/a0577e0bb9986f8ddb19af6df816cada/0ca9f/ViteError_3.webp 384w,\n/static/a0577e0bb9986f8ddb19af6df816cada/dc9b9/ViteError_3.webp 768w,\n/static/a0577e0bb9986f8ddb19af6df816cada/e2c2f/ViteError_3.webp 1152w,\n/static/a0577e0bb9986f8ddb19af6df816cada/60900/ViteError_3.webp 1446w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/webp\">\n          <source srcset=\"/static/a0577e0bb9986f8ddb19af6df816cada/3b721/ViteError_3.png 192w,\n/static/a0577e0bb9986f8ddb19af6df816cada/66595/ViteError_3.png 384w,\n/static/a0577e0bb9986f8ddb19af6df816cada/fe486/ViteError_3.png 768w,\n/static/a0577e0bb9986f8ddb19af6df816cada/d2d74/ViteError_3.png 1152w,\n/static/a0577e0bb9986f8ddb19af6df816cada/93a6a/ViteError_3.png 1446w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/png\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/a0577e0bb9986f8ddb19af6df816cada/fe486/ViteError_3.png\" alt=\"ViteError 3\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n</div>\n<p>Vite는 <code class=\"language-text\">import.meta.env.VITE_</code> 형태로 호출할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">//before</span>\napiKey<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REACT_APP_FIREBASE_API_KEY</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token comment\">//after</span>\napiKey<span class=\"token operator\">:</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VITE_FIREBASE_API_KEY</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><a href=\"https://ko.vitejs.dev/guide/env-and-mode.html\">참고링크</a></p>\n<h3 id=\"마이그레이션-완료-\" style=\"position:relative;\">마이그레이션 완료 :)<a href=\"#%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%EC%99%84%EB%A3%8C-\" aria-label=\"마이그레이션 완료  permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>마이그레이션 후, 슬쩍 전에 만든 사이드프로젝트 배포 주소 올리기 🫡\n<a href=\"https://harumoa.vercel.app\">하루모아</a></p>","frontmatter":{"title":"CRA 프로젝트 Vite로 마이그레이션하기","date":"2024.02.27.","category":"TIL","tag":["react","vite"]}}}]}},"pageContext":{"slug":"/TIL/ViteMigration/"}},"staticQueryHashes":[],"slicesMap":{}}